**Название задачи:** ADR-0001. Параметры оркестратора SAGA для процесса OrchestrPay 

**Автор:** Фарков Михаил

**Дата:** 28.10.2025

### Решение

- В рамках разрабатываемой SAGA оркестрации задачи обработки заказов принято решение разработать выделеный микросервис
  для выполнения оркестрацией процесса OrchestrPay.
- Данный процесс является комплексным, включает в себя большое количество состояний и вовлекает все основные системы
  системы проекта, а также внешние сервисы.
- От производительности и качества работы оркестрации будут напрямую зависеть ключевые бизнесс метрики, поэтому
  разрабатываемы микросервис должен быть максимально гибким, масштабируемым и наблюдаемы.
- Также ожидается, что процесс оркестрации будет достаточно устойчивым, таким образов его реализация как отдельный
  микросервис позволит сократить количество релизов, что позволит минимизировать риск ошибки, чего будет проблематичнее
  достичь в случае расположения оркестрации в рамках другого продуктового микросервиса, который подвержен большему
  количеству изменений из-за необходимости реализации и улучшения пользовательской функциональности и запуска А/Б
  экспериментов.

### Альтернативы

- В качестве основной альтернативы рассматривалось расположения оркестрации в рамках сервиса обработки заказов.
- Однако такой подход потребует перенос значительного объёма бизнес логики, не связанной с обработкой заказов напрямую,
  в данный сервис.
- Кроме того, это не позвоилт независимо масштабировать два этих бизнесс процесса, а видится, что масштабирование
  сервиса заказов в ситуациях пиковой нагрузки будет требоваться чаще, чем масштабирования оркестрации.
- Также такой подход в случае сбоев в оркестрации сделаем недоступным (частично или полностью) сервис заказов, что
  напрямую негативно скажется на пользовательском опыта, так как процесс подбора товаром занимает у пользователя больше
  времени.

### Недостатки, ограничения, риски

- К ключевым недостаткам выбранного решения следует отнести стандартные недостатки, которые возникают при реализации
  оркестрации в качестве выделенного микросервиса, а именно дополнительные сетевые задержки, а также появление
  дополнительной единицы деплоя.
- Однако достоинства реализации в виде выделенного микросервиса для данного бизнес процесса видятся более 
  значительными.
